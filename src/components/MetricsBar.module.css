/* 3-column layout */
.metricsBar { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }

/* Left panel — P&L snapshot */
.leftPanel { background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 12px 14px; }
.panelTitle { font-size: 10px; text-transform: uppercase; color: var(--text-muted); letter-spacing: 0.3px; font-weight: 600; margin-bottom: 10px; }
.plRows { display: flex; flex-direction: column; gap: 4px; }
.plRow { display: flex; justify-content: space-between; align-items: center; padding: 3px 0; }
.plLabel { font-size: 12px; color: var(--text-muted); }
.plValue { font-size: 13px; font-weight: 600; font-variant-numeric: tabular-nums; }
.plNeg { color: #ef4444; }
.plPos { color: #10b981; }
.plPct { font-size: 10px; color: var(--text-light); font-weight: 400; margin-left: 4px; }
.plNoi { border-top: 1px solid var(--border); padding-top: 6px; margin-top: 2px; }
.plNoi .plLabel { font-weight: 600; color: var(--text); }
.plNoi .plValue { font-size: 15px; }
.plCf { border-top: 1px solid var(--border); padding-top: 6px; margin-top: 2px; }
.plCf .plLabel { font-weight: 600; color: var(--text); }
.plCf .plValue { font-size: 15px; }

/* Center panel — pie chart */
.centerPanel { background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 12px 14px; display: flex; flex-direction: column; }
.chartWrap { display: flex; flex-direction: column; align-items: center; justify-content: center; flex: 1; gap: 8px; }
.chartContainer { width: 150px; height: 150px; }
.legend { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
.legendItem { display: flex; align-items: center; gap: 4px; font-size: 10px; color: var(--text-muted); white-space: nowrap; }
.legendDot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }

/* Right panel — metric cards in 2x2 grid */
.rightPanel { display: flex; flex-direction: column; }
.metricsGrid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; flex: 1; }
.metric { background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 10px; text-align: center; display: flex; flex-direction: column; justify-content: center; }
.highlight { background: var(--highlight); border-color: var(--highlight); }
.label { font-size: 10px; text-transform: uppercase; color: var(--text-muted); letter-spacing: 0.3px; display: flex; align-items: center; justify-content: center; gap: 4px; }
.highlight .label { color: var(--text-light); }
.value { font-size: 20px; font-weight: 700; margin-top: 2px; }
.highlight .value { color: var(--highlight-text); }
.sub { font-size: 9px; color: var(--text-light); text-transform: uppercase; }
.subInline { font-size: 11px; color: var(--text-muted); font-weight: 400; }

/* DSCR status colors */
.dscr-status-green { color: #10b981 !important; }
.dscr-status-yellow { color: #eab308 !important; }
.dscr-status-orange { color: #f97316 !important; }
.dscr-status-red { color: #ef4444 !important; }
.dscr-status-darkred { color: #dc2626 !important; }

/* DSCR tooltip */
.dscrMetric { position: relative; cursor: help; }
.dscrTooltip { display: none; position: absolute; top: 100%; left: 50%; transform: translateX(-50%); background: var(--highlight); color: #fff; padding: 12px 14px; border-radius: 8px; font-size: 11px; min-width: 320px; z-index: 50; box-shadow: 0 4px 12px rgba(0,0,0,0.3); margin-top: 8px; }
.dscrTooltip::before { content: ''; position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%); border: 6px solid transparent; border-bottom-color: var(--highlight); }
.dscrMetric:hover .dscrTooltip { display: block; }
.dscrTooltipTitle { font-weight: 600; margin-bottom: 8px; padding-bottom: 6px; border-bottom: 1px solid rgba(255,255,255,0.2); font-size: 12px; }
.dscrTooltipRow { padding: 3px 0; color: var(--text-light); display: flex; justify-content: space-between; align-items: center; gap: 16px; white-space: nowrap; }
.dscrPriceRange { font-size: 10px; font-weight: 600; opacity: 0.85; text-align: right; font-variant-numeric: tabular-nums; }
.green { color: #10b981; }
.yellow { color: #eab308; }
.orange { color: #f97316; }
.red { color: #ef4444; }
.darkred { color: #dc2626; }
.activeRow { background: rgba(255,255,255,0.15); border-radius: 4px; padding: 3px 6px; margin: 0 -6px; font-weight: 600; }
.dscrTooltipCurrent { margin-top: 8px; padding-top: 8px; border-top: 1px solid rgba(255,255,255,0.2); font-size: 10px; color: var(--text-light); }

/* Print compact */
@media print {
  .metricsBar { grid-template-columns: 1fr auto 1fr; gap: 4px; }
  .leftPanel { padding: 6px 8px; }
  .panelTitle { margin-bottom: 3px; font-size: 8px; }
  .plRows { gap: 1px; }
  .plRow { padding: 1px 0; }
  .plLabel { font-size: 9px; }
  .plValue { font-size: 10px; }
  .plPct { font-size: 8px; }
  .plNoi .plValue, .plCf .plValue { font-size: 11px; }
  .plNoi, .plCf { padding-top: 2px; margin-top: 1px; }
  .centerPanel { padding: 4px 6px; overflow: hidden; }
  .chartContainer { width: 80px; height: 80px; }
  .chartWrap { gap: 3px; }
  .legend { gap: 6px; }
  .legendItem { font-size: 8px; }
  .legendDot { width: 6px; height: 6px; }
  .metricsGrid { gap: 3px; }
  .metric { padding: 4px; border-radius: 4px; }
  .value { font-size: 14px; margin-top: 1px; }
  .label { font-size: 8px; }
  .sub { font-size: 7px; }
  .subInline { display: none; }
  .dscrTooltip { display: none !important; }
}
